(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(2400)}])},2400:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return G}});var i,o,s,r,a,h,c=n(5893),u=n(9008),d=n.n(u),l=n(7294),p=n(6701),f=n(7568),m=n(1438),v=n(655),$=n(6486),g=n.n($),w=n(9477);function b(t){var e=function(t){if(null!==t.map){var e=new w.xoR;return e.shininess=0,e.name=t.name,e.map=t.map,e.map.anisotropy=4,e.aoMap=t.aoMap,e.transparent=t.transparent,e}return t};if(t.castShadow=!0,t.receiveShadow=!0,Array.isArray(t.material))for(var n=0;n<t.material.length;n+=1)t.material[n]=e(t.material[n]);else t.material=e(t.material)}(h=i||(i={})).Local="local",h.Global="global";var _,y=function(){function t(e,n){var i=this;(0,m.Z)(this,t),this.updateOrder=3,this.isListening=!1,this.pointerLock=!1,this.isLocked=!1,this.world=e,this.domElement=n||document.body,this.boundOnMouseDown=function(t){return i.onMouseDown(t)},this.boundOnMouseMove=function(t){return i.onMouseMove(t)},this.boundOnMouseUp=function(t){return i.onMouseUp(t)},this.boundOnMouseWheelMove=function(t){return i.onMouseWheelMove(t)},this.boundOnKeyDown=function(t){return i.onKeyDown(t)},this.boundOnKeyUp=function(t){return i.onKeyUp(t)},this.boundOnPointerlockChange=function(t){return i.onPointerLockChange(t)},this.boundOnPointerlockError=function(t){return i.onPointerLockError(t)},this.listen(),e.registerUpdatable(this)}var e=t.prototype;return e.update=function(t){var e;null===(e=this.inputReceiver)||void 0===e||e.inputReceiverUpdate(t)},e.setInputReceiver=function(t){this.inputReceiver=t,this.inputReceiver.inputReceiverInit()},e.listen=function(){this.isListening||(this.isListening=!0,this.world.target.addEventListener("mousedown",this.boundOnMouseDown,!1),document.addEventListener("wheel",this.boundOnMouseWheelMove,!1),document.addEventListener("keydown",this.boundOnKeyDown,!1),document.addEventListener("keyup",this.boundOnKeyUp,!1),document.addEventListener("pointerlockchange",this.boundOnPointerlockChange,!1),document.addEventListener("pointerlockerror",this.boundOnPointerlockError,!1))},e.deafen=function(){this.isListening&&(this.isListening=!1,this.world.target.removeEventListener("mousedown",this.boundOnMouseDown,!1),this.world.target.removeEventListener("mousemove",this.boundOnMouseMove,!1),this.world.target.removeEventListener("mouseup",this.boundOnMouseUp,!1),document.removeEventListener("wheel",this.boundOnMouseWheelMove,!1),document.removeEventListener("keydown",this.boundOnKeyDown,!1),document.removeEventListener("keyup",this.boundOnKeyUp,!1))},e.onMouseDown=function(t){this.pointerLock?this.domElement.requestPointerLock():(this.domElement.addEventListener("mousemove",this.boundOnMouseMove,!1),this.domElement.addEventListener("mouseup",this.boundOnMouseUp,!1)),this.inputReceiver&&this.inputReceiver.handleMouseButton(t,"mouse".concat(t.button),!0)},e.onMouseMove=function(t){this.inputReceiver&&this.inputReceiver.handleMouseMove(t,t.movementX,t.movementY)},e.onMouseUp=function(t){this.pointerLock||(this.domElement.removeEventListener("mousemove",this.boundOnMouseMove,!1),this.domElement.removeEventListener("mouseup",this.boundOnMouseUp,!1)),this.inputReceiver&&this.inputReceiver.handleMouseButton(t,"mouse".concat(t.button),!1)},e.onKeyDown=function(t){this.inputReceiver&&this.inputReceiver.handleKeyboardEvent(t,t.code,!0)},e.onKeyUp=function(t){this.inputReceiver&&this.inputReceiver.handleKeyboardEvent(t,t.code,!1)},e.onMouseWheelMove=function(t){this.inputReceiver&&this.inputReceiver.handleMouseWheel(t,t.deltaY)},e.setPointerLock=function(t){this.pointerLock=t},e.onPointerLockChange=function(t){document.pointerLockElement===this.domElement?(this.domElement.addEventListener("mousemove",this.boundOnMouseMove,!1),this.domElement.addEventListener("mouseup",this.boundOnMouseUp,!1),this.isLocked=!0):(this.domElement.removeEventListener("mousemove",this.boundOnMouseMove,!1),this.domElement.removeEventListener("mouseup",this.boundOnMouseUp,!1),this.isLocked=!1)},e.onPointerLockError=function(t){console.error("PointerLockControls: Unable to use Pointer Lock API.",this)},t}(),L=n(7607),P=function t(e){(0,m.Z)(this,t),this.total=0,this.progress=0,this.finished=!0,this.path=e};(_=o||(o={})).START="start",_.PROGRESS="progress",_.FINISH="finish";var M=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,m.Z)(this,t),this.firstLoad=!0,this.loadingTracker=[],this.world=e,this.gltfLoader=new L.E,this.world.setTimeScale(0);var i=n.onStart,o=n.onProgress,s=n.onFinished;this.onStart=i,this.onProgress=o,this.onFinished=s}var e=t.prototype;return e.loadGLTF=function(t){var e=this;return(0,f.Z)(function(){return(0,v.__generator)(this,function(n){return[2,new Promise(function(n,i){e.onStart&&e.onStart();var o=e.addLoadingEntry(t);e.gltfLoader.load(t,function(t){e.doneLoading(o),n(t)},function(t){t.lengthComputable&&(o.total=t.total,o.progress=t.loaded/t.total,e.onProgress&&e.onProgress(e.getLoadingPercentage()))},function(t){i(t)})})]})})()},e.addLoadingEntry=function(t){var e=new P(t);return this.loadingTracker.push(e),e},e.doneLoading=function(t){t.finished=!0,t.progress=1,this.isLoadingDone()&&this.onFinished&&this.onFinished()},e.isLoadingDone=function(){for(var t=0;t<this.loadingTracker.length;t+=1)if(!this.loadingTracker[t].finished)return!1;return!0},e.getLoadingPercentage=function(){for(var t=0,e=0,n=0;n<this.loadingTracker.length;n+=1)this.loadingTracker[n].finished||(t+=this.loadingTracker[n].total,e+=this.loadingTracker[n].progress*this.loadingTracker[n].total,this.loadingTracker[n].finished);return 0===t?0:e/t},t}(),E=n(797);g().throttle(function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return(s=console).log.apply(s,(0,E.Z)(e))},1e3);var O,x=function(){function t(e,n,i){(0,m.Z)(this,t),this.updateOrder=4,this.windowFrames=[],this.render_frames=[4,5,6],this.hFOV=90,this.world=e,this.camera=n,this.windowFrames=i;for(var o=[1/0,-1/0],s=[1/0,-1/0],r=0;r<i.length;r++)o[0]=Math.min(i[r].bbox.min.z,o[0]),o[1]=Math.max(i[r].bbox.max.z,o[1]),s[0]=Math.min(i[r].bbox.min.y,s[0]),s[1]=Math.max(i[r].bbox.max.y,s[1]);this.cLeft=o[1],this.cWidth=o[1]-o[0],this.cBottom=s[0],this.cHeight=s[1]-s[0],this.cX=i[0].object.position.x;var a=i[0].bbox,h=a.min.z,c=a.max.z;this.cCellWidth=c-h,this._calculateFocusPoint()}var e=t.prototype;return e.render=function(t){for(var e=0;e<this.render_frames.length;e++){var n=this.windowFrames[this.render_frames[e]-1],i=e*this.vCellWidth;t.setViewport(i,0,this.vCellWidth,this.vHeight),t.setScissor(i,0,this.vCellWidth,this.vHeight),t.setScissorTest(!0),this.camera.setViewOffset(this.vWidth,this.vHeight,n.offsetX,n.offsetY,this.vCellWidth,this.vHeight),t.render(this.world.graphicsWorld,this.camera)}},e._calculateFocusPoint=function(){this.focusPoint=new w.Pa4(this.cX,this.cBottom+this.cHeight/2,this.cLeft-this.cWidth/2)},e.onResize=function(t,e){this.vCellWidth=t/this.render_frames.length,this.cHeight=this.cCellWidth/(this.vCellWidth/e),this.camera.aspect=this.cWidth/this.cHeight,this.camera.fov=360*Math.atan(Math.tan(this.hFOV*Math.PI/360)/this.camera.aspect)/Math.PI,console.log(this.camera.fov);var n=this.cHeight/(2*Math.tan(Math.PI*this.camera.fov/360));this.camera.near=n,this._calculateFocusPoint();var i=new w.Pa4(n,0,0);this.camera.position.copy(this.focusPoint).add(i);var o=this.camera.projectionMatrix.elements;o[5]=this.camera.aspect,o[0]=1,this.camera.lookAt(this.focusPoint),this.camera.updateProjectionMatrix(),this.camera.updateMatrixWorld(),this.vHeight=e,this.vWidth=e*this.camera.aspect;for(var s=0;s<this.windowFrames.length;s++)this.windowFrames[s].updateViewOffset(this.cLeft,this.cWidth,this.vWidth)},t}(),S=function(){function t(e,n,i){(0,m.Z)(this,t),this.object=e,this.window_index=n,this.space_left=i,this.object.geometry.computeBoundingBox(),this.bbox=new w.ZzF().setFromObject(this.object)}return t.prototype.updateViewOffset=function(t,e,n){this.offsetX=(t-this.bbox.max.z)/(e/n),this.offsetY=0},t}(),D=n(4111),k=n(8029),C=n(2670),R=n(6626),T=function t(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];(0,m.Z)(this,t),this.isPressed=!1,this.justPressed=!1,this.justReleased=!1,this.eventCodes=n};(O=r||(r={}))[O.Nobot=0]="Nobot",O[O.Decoration=1]="Decoration",O[O.System=2]="System";var Z,W=n(5785),A=n(2662);(Z=a||(a={})).WALK="walk",Z.IDLE="idle";var F=function(){function t(e){(0,m.Z)(this,t),this.nobot=e,this.nobot.arcadeVelocityIsAdditive=!1,this.nobot.setArcadeVelocityInfluence(1,0,1),this.timer=0}var e=t.prototype;return e.update=function(t){this.timer+=t},e.anyDirection=function(){return this.nobot.actions.up.isPressed||this.nobot.actions.down.isPressed||this.nobot.actions.left.isPressed||this.nobot.actions.right.isPressed},e.playAnimation=function(t,e){this.animationLength=this.nobot.setAnimation(t,e)},e.animationEnded=function(t){return!this.nobot.mixer||(this.animationLength?this.timer>this.animationLength-t:(console.error("Error: Set this.animationLength in state constructor!"),!1))},e.onInputChange=function(){},t}(),z=function(t){(0,k.Z)(n,t);var e=(0,R.Z)(n);function n(t){var i;return(0,m.Z)(this,n),(i=e.call(this,t)).nobot.setArcadeVelocityTarget(.8),i.playAnimation("walk",.2),i}var i=n.prototype;return i.update=function(t){(0,W.Z)((0,A.Z)(n.prototype),"update",this).call(this,t),this.nobot.setCameraRelativeOrientationTarget()},i.onInputChange=function(){(0,W.Z)((0,A.Z)(n.prototype),"onInputChange",this).call(this),this.anyDirection()||(this.nobot.velocity.length(),this.nobot.setState(new j(this.nobot)))},n}(F),j=function(t){(0,k.Z)(n,t);var e=(0,R.Z)(n);function n(t){var i;return(0,m.Z)(this,n),(i=e.call(this,t)).nobot.setArcadeVelocityTarget(0),i.playAnimation("idle",.1),i}var i=n.prototype;return i.update=function(t){(0,W.Z)((0,A.Z)(n.prototype),"update",this).call(this,t)},i.onInputChange=function(){(0,W.Z)((0,A.Z)(n.prototype),"onInputChange",this).call(this),this.anyDirection()&&this.nobot.setState(new z(this.nobot))},n}(F),V=function(t){(0,k.Z)(n,t);var e=(0,R.Z)(n);function n(t){var i;return(0,m.Z)(this,n),(i=e.call(this)).updateOrder=1,i.entityType=r.Nobot,i.height=0,i.materials=[],i.moveSpeed=2,i.angularVelocity=0,i.acceleration=new w.Pa4,i.velocity=new w.Pa4,i.velocityTarget=new w.Pa4,i.orientation=new w.Pa4(0,0,1),i.orientationTarget=new w.Pa4(0,0,1),i.arcadeVelocityInfluence=new w.Pa4,i.arcadeVelocityIsAdditive=!1,i.readNobotData(t),i.readNobotAnimations(t),i.tiltContainer=new w.ZAu,i.add(i.tiltContainer),i.modelContainer=new w.ZAu,i.modelContainer.position.y=-.57,i.tiltContainer.add(i.modelContainer),i.modelContainer.add(t.scene),i.mixer=new w.Xcj(t.scene),i.viewVector=new w.Pa4,i.actions={up:new T("KeyW"),down:new T("KeyS"),left:new T("KeyA"),right:new T("KeyD"),run:new T("ShiftLeft"),jump:new T("Space"),use:new T("KeyE"),primary:new T("Mouse0"),secondary:new T("Mouse1")},i.setState(new j((0,D.Z)(i))),i}var i=n.prototype;return i.setArcadeVelocityInfluence=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;this.arcadeVelocityInfluence.set(t,e,n)},i.setArcadeVelocityTarget=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.velocityTarget.x=e,this.velocityTarget.y=n,this.velocityTarget.z=t},i.setViewVector=function(t){this.viewVector.copy(t).normalize()},i.setOrientation=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new w.Pa4().copy(t).setY(0).normalize();this.orientationTarget.copy(n),e&&this.orientation.copy(n)},i.setPosition=function(t,e,n){this.position.set(t,e,n)},i.setState=function(t){this.nobotState=t},i.setStateSerialized=function(t){switch(t){case a.WALK:this.setState(new z(this));break;case a.IDLE:this.setState(new j(this))}},i.setAnimation=function(t,e){if(!this.mixer)return 0;var n=w.m7l.findByName(this.animations,t),i=this.mixer.clipAction(n);if(null===i)return console.error("Animation ".concat(t," not found!")),0;if(this.mixer.stopAllAction(),this.currAnim){var o=this.mixer.clipAction(this.currAnim);o.loop=w.uEv,o.timeScale=-1,o.play(),o.crossFadeTo(i,e,!1),i.timeScale=1,i.loop=w.YKA}else i.fadeIn(e);return i.play(),this.currAnim=n,i.getClip().duration},i.addToWorld=function(t){g().includes(t.nobots,this)?console.warn("Could not add NOBOT to world it already exists in!"):(this.world=t,t.nobots.push(this),t.graphicsWorld.add(this))},i.removeFromWorld=function(t){g().includes(t.nobots,this)?(this.world=void 0,g().pull(t.nobots,this),t.graphicsWorld.remove(this)):console.warn("Could not remove NOBOT from a world it is not in!")},i.update=function(t){var e,n;null===(e=this.behavior)||void 0===e||e.update(t),null===(n=this.nobotState)||void 0===n||n.update(t),this.mixer&&this.mixer.update(t),this.updateMatrixWorld()},i.readNobotData=function(t){var e=this;t.scene.traverse(function(t){t.userData.ignoredByCamera=!0,(0,C.Z)(t,w.Kj0)&&t.isMesh&&(b(t),t.material&&e.materials.push(t.material))})},i.readNobotAnimations=function(t){this.animations=t.animations},i.triggerAction=function(t,e){var n=this.actions[t];n.isPressed!==e&&(n.isPressed=e,n.justPressed=!1,n.justReleased=!1,e?n.justPressed=!0:n.justReleased=!0,this.nobotState.onInputChange(),n.justPressed=!1,n.justReleased=!1)},i.getLocalMovementDirection=function(){var t=this.actions.right.isPressed?-1:0,e=this.actions.left.isPressed?1:0,n=this.actions.up.isPressed?1:0,i=this.actions.down.isPressed?-1:0;return new w.Pa4(t+e,0,n+i).normalize()},i.getCameraRelativeMovementVector=function(){var t,e,n=this.getLocalMovementDirection();return t=new w.Pa4(this.viewVector.x,0,this.viewVector.z).normalize(),e=n,new w.Pa4(t.x*e.z+t.z*e.x,e.y,t.z*e.z+-t.x*e.x)},i.setCameraRelativeOrientationTarget=function(){var t=this.getCameraRelativeMovementVector();0===t.x&&0===t.y&&0===t.z?this.setOrientation(this.orientation):this.setOrientation(t)},i.rotateModel=function(){this.lookAt(this.position.x+this.orientation.x,this.position.y+this.orientation.y,this.position.z+this.orientation.z),this.tiltContainer.rotation.z=-(1.2*this.angularVelocity)*this.velocity.length(),this.tiltContainer.position.setY(Math.cos(Math.abs(2.3*this.angularVelocity*this.velocity.length()))/2-.5)},n}(w.Tme),I=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;(0,m.Z)(this,t),this.updateOrder=1,this.isStarted=!1,this.nobots=[],this.nobotSpeed=.6,this.entry=e,this.exit=n,this.n_nobots=i,this.n_spawned=0}var e=t.prototype;return e.load=function(t){var e=this;return(0,f.Z)(function(){var n,i;return(0,v.__generator)(this,function(o){switch(o.label){case 0:n=0,o.label=1;case 1:if(!(n<e.n_nobots))return[3,4];return[4,t.loadingManager.loadGLTF("/assets/nobots/nobot-anim.glb")];case 2:i=o.sent(),e.nobots.push(new V(i)),o.label=3;case 3:return n++,[3,1];case 4:return[2]}})})()},e.start=function(t){var e=this;return(0,f.Z)(function(){var n,i;return(0,v.__generator)(this,function(o){switch(o.label){case 0:return n=function(n){setTimeout(function(){e.spawnNobot(e.nobots[n+1],t)},2e3*n+2e3)},e.isStarted=!0,[4,e.spawnNobot(e.nobots[0],t)];case 1:for(o.sent(),t.registerUpdatable(e),i=0;i<5;i++)n(i);return[2]}})})()},e.update=function(t){for(var e=0;e<this.n_spawned;e++)this.nobots[e].position.z+=t*this.nobotSpeed,this.nobots[e].position.z>this.exit.position.z&&(this.nobots[e].position.z=this.entry.position.z)},e.spawnNobot=function(t,e){var n=this;return(0,f.Z)(function(){var o,s;return(0,v.__generator)(this,function(r){return o=new w.Pa4,n.entry.getWorldPosition(o),t.setPosition(o.x,o.y,o.z),s=function(t){var e,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.Global,s=(e=t,(n=o)===i.Local?e.matrix:e.matrixWorld);return new w.Pa4(s.elements[8],s.elements[9],s.elements[10])}(n.entry),t.setOrientation(s,!0),e.add(t),t.setState(new z(t)),n.n_spawned+=1,[2]})})()},t}(),N=function(){function t(e,n){(0,m.Z)(this,t),this.spawnAlways=!1,this.default=!1,this.world=n,this.id=e.name,Object.prototype.hasOwnProperty.call(e.userData,"name")&&(this.name=e.userData.name),Object.prototype.hasOwnProperty.call(e.userData,"default")&&(this.default=e.userData.default);var i=[],o=void 0,s=void 0;e.traverse(function(t){Object.prototype.hasOwnProperty.call(t,"userData")&&Object.prototype.hasOwnProperty.call(t.userData,"data")&&("spawn"===t.userData.data?"entry"===t.userData.type?o=t:"exit"===t.userData.type&&(s=t):"camera"===t.userData.data&&i.push(new S(t,parseInt(t.userData.index),parseFloat(t.userData.space_left))))}),i=i.sort(function(t,e){return t.window_index-e.window_index}),this.world.cameraOperator=new x(this.world,this.world.camera,i),this.nobotManager=new I(o,s,i.length)}return t.prototype.launch=function(t){var e=this;return(0,f.Z)(function(){return(0,v.__generator)(this,function(n){switch(n.label){case 0:return[4,e.nobotManager.load(t)];case 1:return n.sent(),[4,e.nobotManager.start(t)];case 2:return n.sent(),[2]}})})()},t}(),U=function(){function t(e,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=this;(0,m.Z)(this,t),this.timeScaleTarget=1,this.timeScale=1,this.nobots=[],this.updatables=[],this.scenarios=[],this.listeners={},this.target=e,this.ccamOptions=n,this.renderer=new w.CP7({alpha:!0,antialias:!1,powerPreference:"high-performance"}),this.renderer.setPixelRatio(.3),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=w.ntZ,this.camera=new w.cPb;var r=function(){var t=e.getBoundingClientRect(),n=t.width,i=t.height;s.cameraOperator&&s.cameraOperator.onResize(n,i),s.viewportWidth=n,s.viewportHeight=i,s.renderer.setSize(n,i,!1)};this.listeners.resize=[r],window.addEventListener("resize",r,!1),this.graphicsWorld=new w.xsS;var a=e.getBoundingClientRect(),h=a.width,c=a.height;this.viewportWidth=h,this.viewportHeight=c,r(),this.physicsFrameRate=60,this.physicsFrameTime=1/this.physicsFrameRate,this.physicsMaxPrediction=this.physicsFrameRate,this.clock=new w.SUY,this.renderDelta=0,this.logicDelta=0,this.sinceLastFrame=0,this.justRendered=!1,this.inputManager=new y(this,this.target),this.loadingManager=new M(this,{onStart:o.onDownloadStart,onProgress:function(t){return console.log(t)},onFinished:o.onDownloadFinish}),i&&this.openScene(i).then(function(){r(),s.render(s)}),this.target.appendChild(this.renderer.domElement)}var e=t.prototype;return e.destroy=function(){var t=this;this.target.removeChild(this.renderer.domElement),this.inputManager.deafen(),Object.keys(this.listeners).forEach(function(e){t.listeners[e].forEach(function(t){window.removeEventListener(e,t,!1)})})},e.render=function(t){this.requestDelta=this.clock.getDelta(),requestAnimationFrame(function(){t.render(t)});var e,n=this.requestDelta+this.renderDelta+this.logicDelta,i=n*this.timeScale;i=Math.min(i,1/30),t.update(i,n),this.logicDelta=this.clock.getDelta(),this.sinceLastFrame+=this.requestDelta+this.renderDelta+this.logicDelta,this.sinceLastFrame%=1/60,null===(e=this.cameraOperator)||void 0===e||e.render(this.renderer),this.renderDelta=this.clock.getDelta()},e.update=function(t,e){this.updatables.forEach(function(n){n.update(t,e)}),this.timeScale=w.M8C.lerp(this.timeScale,this.timeScaleTarget,.2)},e.registerUpdatable=function(t){this.updatables.push(t),this.updatables.sort(function(t,e){return t.updateOrder>e.updateOrder?1:-1})},e.unregisterUpdatable=function(t){g().pull(this.updatables,t)},e.add=function(t){t.addToWorld(this),this.registerUpdatable(t)},e.remove=function(t){t.removeFromWorld(this),this.unregisterUpdatable(t)},e.clearEntities=function(){for(var t=0;t<this.nobots.length;t+=1)this.remove(this.nobots[t]),t-=1},e.setTimeScale=function(t){this.timeScaleTarget=t},e.openScene=function(t){var e=this;return(0,f.Z)(function(){var n;return(0,v.__generator)(this,function(i){switch(i.label){case 0:return[4,e.loadingManager.loadGLTF("/assets/worlds/".concat(t,".glb"))];case 1:return n=i.sent(),[4,e.loadScene(n)];case 2:return i.sent(),e.update(1,1),e.setTimeScale(1),[2]}})})()},e.loadScene=function(t){var e=this;return(0,f.Z)(function(){var n,i;return(0,v.__generator)(this,function(o){switch(o.label){case 0:for(t.scene.traverse(function(t){Object.prototype.hasOwnProperty.call(t,"userData")&&("Mesh"===t.type&&b(t),Object.prototype.hasOwnProperty.call(t.userData,"data")&&"scenario"===t.userData.data&&e.scenarios.push(new N(t,e)))}),e.graphicsWorld.add(t.scene),e.graphicsWorld.add(new w.vmT("#76B6E7","#E7324F")),n=null,i=0;i<e.scenarios.length;i+=1)if(e.scenarios[i].default){n=e.scenarios[i].id;break}if(!n)return[3,2];return[4,e.launchScenario(n)];case 1:o.sent(),o.label=2;case 2:return[2]}})})()},e.launchScenario=function(t){var e=this;return(0,f.Z)(function(){var n,i;return(0,v.__generator)(this,function(o){switch(o.label){case 0:for(e.lastScenarioID=t,e.clearEntities(),n=[],i=0;i<e.scenarios.length;i+=1)(e.scenarios[i].id===t||e.scenarios[i].spawnAlways)&&n.push(e.scenarios[i].launch(e));return[4,Promise.all(n)];case 1:return o.sent(),[2]}})})()},t}(),K=n(4872),H=n.n(K),B=function(t){var e=t.world,n=t.windowsStart,i=t.windowsEnd,o=t.rotated,s=(0,l.useRef)(null),r=(0,l.useRef)(null),a=(0,l.useRef)(null),h=(0,l.useState)(!0),u=h[0],d=h[1];return(0,l.useEffect)(function(){var t=function(){d(u)},r=g().debounce(function(){d(!1)},300);s.current&&(a.current=new U(s.current,{windowsStart:n,windowsEnd:i,rotated:o},e,{onDownloadStart:t,onDownloadFinish:r}))},[e]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:H().nobot_world,ref:s}),(0,c.jsx)(p.Z,{in:u,timeout:300,nodeRef:r,mountOnEnter:!0,unmountOnExit:!0,children:(0,c.jsx)("div",{className:H().overlay,ref:r,children:(0,c.jsx)("b",{children:"LOADING..."})})})]})},X=n(6134),Y=n.n(X),G=function(){return(0,c.jsxs)("div",{className:Y().container,children:[(0,c.jsxs)(d(),{children:[(0,c.jsx)("title",{children:"CS334 A1 - Nobots"}),(0,c.jsx)("meta",{name:"description",content:"a nobot window display."}),(0,c.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,c.jsx)(B,{world:"ccamdisplay_2",windowsStart:4,windowsEnd:6,rotated:!1})]})}},6134:function(t){t.exports={container:"Home_container__Ennsq"}},4872:function(t){t.exports={nobot_world:"NobotWorld_nobot_world__6Rvyf",overlay:"NobotWorld_overlay__ObkHF"}}},function(t){t.O(0,[737,662,269,774,888,179],function(){return t(t.s=8312)}),_N_E=t.O()}]);